{
  "databaseConfig": {
    "username": "greatliaison",
    "password": "abc123",
    "host": "localhost",
    "port": "27017",
    "database": "greatliaison"
  },

  "express": {
    "view cache": false,
    "view engine": "js",
    "views": "path:./.build/templates"
  },

  "view engines": {
    "js": {
      "module": "makara",
      "renderer": {
        "method": "js",
        "arguments": [
          { "cache": true, "helpers": "config:dust.helpers" }
        ]
      }
    }
  },

  "dust": {
    "helpers": [

      "dust-makara-helpers"

    ]
  },



  "i18n": {
    "contentPath": "path:./locales",
    "fallback": "en-US"
  },


  "specialization": {
  },

  "middleware": {
    /**
      * Override the default lusca configuration to disable CSRF handling.
      */
    "appsec": {
      "module": {
        "arguments": [
          {
            "xframe": "SAMEORIGIN",
            "p3p": false,
            "csp": false
          }
        ]
      }
    },

    /**
      * Enable *ONLY* CSRF filtered by route.
      * Note: The route "regex" needs the double parens
      * because of how express parses route strings.
      */
    "csrf": {
      "enabled": true,
      "priority": 111,
      //"route": "/((?!cart))*",
      "route": "/((?!))*",
      "module": {
        "name": "lusca",
        "method": "csrf",
        "arguments": [ {} ]
      }
    },

    "session": {
      "module": {
        // use custom redis session module
        "name": "path:./lib/middleware/redis-session",
        "arguments": [
          // express-session configuration
          {
            "secret": "ilovescotchscotchyscotchscotch",
            "cookie": {
              "path": "/",
              "httpOnly": true,
              "maxAge": null
            },
            "resave": true,
            "saveUninitialized": true,
            "store": null    // NB: this will be overlaid in our module
          },
          // connect-redis configuration
          {
            "host": "localhost",
            "port": 6379,
            "prefix": "session:"
          }
        ]
      }
    },

    "makara": {
      "priority": 100,
      "enabled": true,
      "module": {
        "name": "makara",
        "arguments": [
          {
            "i18n": "config:i18n",
            "specialization": "config:specialization"
          }
        ]
      }
    },

    "static": {
      "module": {
        "arguments": [ "path:./.build" ]
      }
    },

    "router": {
      "module": {
        "arguments": [{ "directory": "path:./controllers" }]
      }
    }

  }
}
